<template name="invitation">
  <div class="content-bubbles">
    <div class='container'>
      <div class="row">
        <div class="col s12 center">
          <div id="invitations-spacer"></div>

          <div class="row center">
            <div class="col s2"></div>
            <div class="col s8">
              <img src='/img/logo-white-red.png' class="responsive-img">
            </div>
            <div class="col s2"></div>
          </div>

          <div class="title row  center white-text">
            <div class="col s12">
              {{_ "invitations_title"}}
            </div>
          </div>

          {{#if Template.subscriptionsReady}}

            <div class="row">
              <div class="col s12">
                <div class="panel red accent-2">
                  {{_ "please_invite"}}
                </div>
              </div>
            </div>

            {{#if noInvitations}}
              <div class="row">
                <div class="col s12">
                  <div class="panel">
                    {{_ "no_invitations"}}
                  </div>
                </div>
              </div>
            {{/if}}

              {{#each userInvitations}}
                <div class="row">
                  <div class="col s12">
                    <div class="panel">
                      <div class="row no-margins">
                        <div class="col s4 right-align {{#if invitedUserId}} grey-text {{else}} red-text text-accent-2 copy-btn {{/if}}" data-clipboard-text={{code}}>
                          {{ code }}
                        </div>
                        {{#if invitedUserId}}
                          <div class="col s8 left-align">
                            {{ invitedUserName invitedUserId }}
                          </div>
                        {{else}}
                          <div class="col s8 left-align">
                            {{_ "still_free_invitation" }}
                          </div>
                        {{/if}}
                      </div>
                    </div>
                  </div>
                </div>
              {{/each}}
              <div class="row">
                <div class="col s12 center">
                  <button class="btn waves-effect waves-light green accent-2" id="back-btn">{{_ "back_btn"}}</button>
                </div>
              </div>
              <script type="text/javascript" src="/app/client/compatibility/clipboard.min.js"></script>
              <script>
                var clipboard = new ClipboardJS('.copy-btn');
                clipboard.on('success', function(e) {
                  console.log(e);
                  M.toast({html: TAPi18n.__('copied_invitation_code')})
                });
                clipboard.on('error', function(e) {
                  console.log(e);
                });
               </script>
          {{/if}}


        </div>
      </div>
    </div>
  </div>
  {{> side_nav}}

</template>
